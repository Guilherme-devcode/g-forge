<div
  class="gforge-table-container"
  (click)="contextMenu.length > 0 && onOutsideClick()"
>
  <!-- Busca -->
  <div *ngIf="searchable" class="gforge-search">
    <gforge-input-text
      [placeholder]="searchPlaceholder"
      [value]="searchTerm"
      (valueChanged)="onSearch($event)"
    ></gforge-input-text>
  </div>

  <!-- Tabela -->
  <div
    class="gforge-table"
    [class.scrollable]="infiniteScroll || fixedHeader"
    [class.fixed-header]="fixedHeader"
    [class.non-fixed-header]="!fixedHeader"
    (scroll)="(infiniteScroll || fixedHeader) && onScroll($event)"
  >
    <table>
      <thead>
        <tr>
          <th *ngFor="let column of columns" (click)="onSort(column)">
            {{ column.header }}
            <span *ngIf="column.sortable" class="sort-icon">⇅</span>
          </th>
          <th *ngIf="showActionsColumn">{{ actionsLabel }}</th>
        </tr>
      </thead>
      <tbody>
        <tr
          (contextmenu)="contextMenu.length > 0 && onRightClick($event, row)"
          *ngFor="let row of paginatedData"
        >
          <td *ngFor="let column of columns">
            {{ row[column.field] }}
          </td>
          <td *ngIf="showActionsColumn">
            <button type="button" (click)="onActionMenuClick($event, row)">
              ⋮
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Paginação -->
  <div *ngIf="pagination" class="gforge-pagination">
    <gforge-button
      *ngFor="let page of totalPages"
      [label]="page.toString()"
      [variant]="currentPage === page ? 'primary' : 'secondary'"
      (clicked)="currentPage = page"
    ></gforge-button>
  </div>

  <div
    *ngIf="showContextMenu"
    class="context-menu"
    [style.left.px]="menuPosition.x"
    [style.top.px]="menuPosition.y"
  >
    <button
      *ngFor="let menuItem of contextMenu"
      (click)="onMenuItemClick(menuItem)"
    >
      <span *ngIf="menuItem.symbol">{{ menuItem.symbol }}</span>
      {{ menuItem.name }}
    </button>
  </div>
</div>
